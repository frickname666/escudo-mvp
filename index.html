<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escudo del Jard√≠n - MVP</title>
    <style>
        :root {
            --bg-dark: #0f0f23;
            --bg-card: #1a1a2e;
            --text: #e2e8f0;
            --accent: #60a5fa;
            --success: #10b981;
        }
        body {
            background: var(--bg-dark);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        h1 {
            color: var(--accent);
            text-align: center;
            margin-bottom: 10px;
        }
        .sello {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            word-break: break-all;
        }
        button {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            transition: background 0.3s;
        }
        button:hover {
            background: #4361ee;
        }
        .metric {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .success {
            color: var(--success);
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>üõ°Ô∏è Escudo del Jard√≠n - MVP</h1>
        <p>Protege tu autor√≠a digital en 1 clic. <strong>100% offline</strong>. Sin registro.</p>
        
        <textarea id="contenido" placeholder="Pega aqu√≠ tu texto, c√≥digo o idea..." 
                  rows="5" style="width:100%; background:#1e293b; color:white; border:1px solid #334155; padding:12px; border-radius:6px; margin:15px 0;"></textarea>
        
        <button onclick="generarSello()">Generar Sello de Autor√≠a</button>
        
        <div id="resultado" style="display:none; margin-top:20px;">
            <h3>Tu sello verificable:</h3>
            <div class="sello" id="sello-output"></div>
            <p class="success">¬°Guardado localmente! Vuelve ma√±ana para verificarlo.</p>
        </div>
    </div>

    <div class="card">
        <h3>üìä ¬øResuelve un problema real?</h3>
        <p>Responde estas 2 preguntas (30 segundos):</p>
        
        <form id="encuesta">
            <p><strong>1. ¬øAlguna vez perdiste tiempo/dinero por falta de prueba de autor√≠a?</strong></p>
            <label><input type="radio" name="dolor" value="si"> S√≠, perd√≠ m√°s de 2 horas/mes</label><br>
            <label><input type="radio" name="dolor" value="poco"> Algo, pero no es urgente</label><br>
            <label><input type="radio" name="dolor" value="no"> No he tenido este problema</label><br><br>
            
            <p><strong>2. ¬øPagar√≠as $2.99/mes por alertas autom√°ticas de plagio?</strong></p>
            <label><input type="radio" name="pago" value="si"> S√≠, si funciona bien</label><br>
            <label><input type="radio" name="pago" value="no"> No, es demasiado</label><br><br>
            
            <button type="submit" style="width:auto;">Enviar respuestas</button>
        </form>
        
        <div id="gracias" style="display:none; margin-top:20px; color:#10b981;">
            ‚úÖ ¬°Gracias! Tu sello est√° guardado. Vuelve ma√±ana para verificarlo.
        </div>
    </div>

    <div class="card">
        <h3>üìà M√©tricas en tiempo real</h3>
        <div class="metric">
            <span>Usuarios hoy:</span>
            <span id="usuarios-hoy">0</span>
        </div>
        <div class="metric">
            <span>Sellos generados:</span>
            <span id="sellos-total">0</span>
        </div>
        <div class="metric">
            <span>Usuarios recurrentes:</span>
            <span id="usuarios-recurrentes">0</span>
        </div>
    </div>

    <script>
        // MVP: Solo usa localStorage (0 dependencias)
        document.getElementById('encuesta').addEventListener('submit', function(e) {
            e.preventDefault();
            document.getElementById('encuesta').style.display = 'none';
            document.getElementById('gracias').style.display = 'block';
            
            // Guardar respuestas (an√≥nimas)
            const dolor = document.querySelector('input[name="dolor"]:checked')?.value;
            const pago = document.querySelector('input[name="pago"]:checked')?.value;
            
            if(dolor && pago) {
                const stats = JSON.parse(localStorage.getItem('stats') || '{}');
                stats[`encuesta_${Date.now()}`] = {dolor, pago};
                localStorage.setItem('stats', JSON.stringify(stats));
                
                // Actualizar m√©tricas
                actualizarMetricas();
            }
        });

        function generarSello() {
            const contenido = document.getElementById('contenido').value.trim();
            if(!contenido) {
                alert('¬°Pega tu contenido primero!');
                return;
            }
            
            // Generar huella √∫nica (timestamp + hash)
            const timestamp = new Date().toISOString();
            const huella = btoa(`${contenido}${timestamp}`).slice(0, 24);
            
            // Guardar en localStorage
            const sellos = JSON.parse(localStorage.getItem('sellos') || '[]');
            sellos.push({ huella, timestamp });
            localStorage.setItem('sellos', JSON.stringify(sellos));
            
            // Mostrar resultado
            document.getElementById('sello-output').innerHTML = 
                `Huella: ${huella}<br>Fecha: ${timestamp}<br>Verificaci√≥n: /verificar/${huella}`;
            document.getElementById('resultado').style.display = 'block';
            
            // Actualizar m√©tricas
            actualizarMetricas();
        }

        function actualizarMetricas() {
            // Usuarios √∫nicos (por d√≠a)
            const hoy = new Date().toISOString().split('T')[0];
            let usuariosHoy = JSON.parse(localStorage.getItem('usuarios_hoy') || '{}');
            usuariosHoy[hoy] = (usuariosHoy[hoy] || 0) + 1;
            localStorage.setItem('usuarios_hoy', JSON.stringify(usuariosHoy));
            
            // Sellos totales
            const sellos = JSON.parse(localStorage.getItem('sellos') || '[]');
            
            // Usuarios recurrentes (han usado el MVP m√°s de una vez)
            const sellosPorUsuario = {};
            sellos.forEach(s => {
                const usuario = s.timestamp.split('T')[0];
                sellosPorUsuario[usuario] = (sellosPorUsuario[usuario] || 0) + 1;
            });
            const recurrentes = Object.values(sellosPorUsuario).filter(v => v > 1).length;
            
            // Actualizar UI
            document.getElementById('usuarios-hoy').textContent = usuariosHoy[hoy];
            document.getElementById('sellos-total').textContent = sellos.length;
            document.getElementById('usuarios-recurrentes').textContent = recurrentes;
        }

        // Inicializar m√©tricas al cargar
        window.onload = actualizarMetricas;
    </script>
</body>
</html>
